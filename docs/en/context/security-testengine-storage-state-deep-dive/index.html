<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/PowerApps-TestEngine/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=PowerApps-TestEngine/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.137.1">
    <meta name="description" content="">


    <link rel="icon" href="/PowerApps-TestEngine/images/favicon.png" type="image/png">

    <title>Storage State Deep Dive :: PowerApps Test Engine</title>

    
    <link href="/PowerApps-TestEngine/css/nucleus.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/fontawesome-all.min.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/hybrid.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/featherlight.min.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/perfect-scrollbar.min.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/auto-complete.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/atom-one-dark-reasonable.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/theme.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/tabs.css?1737352076" rel="stylesheet">
    <link href="/PowerApps-TestEngine/css/hugo-theme.css?1737352076" rel="stylesheet">
    
    <link href="/PowerApps-TestEngine/css/theme-blue.css?1737352076" rel="stylesheet">
    
    

    <script src="/PowerApps-TestEngine/js/jquery-3.3.1.min.js?1737352076"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/PowerApps-TestEngine/en/context/security-testengine-storage-state-deep-dive/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/PowerApps-TestEngine/js/lunr.min.js?1737352076"></script>
<script type="text/javascript" src="/PowerApps-TestEngine/js/auto-complete.js?1737352076"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/PowerApps-TestEngine\/";
    
</script>
<script type="text/javascript" src="/PowerApps-TestEngine/js/search.js?1737352076"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/PowerApps-TestEngine'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/guidance/" title="" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/guidance/">
          
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/authoring/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/authoring/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/executionanddeploymentprocessintegration/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/executionanddeploymentprocessintegration/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/operationaltests/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/operationaltests/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/overview/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/overview/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/personas/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/personas/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/guidance/securityconsiderations/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/guidance/securityconsiderations/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/" title="" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/">
          
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/audit/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/audit/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/bottom-up/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/bottom-up/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/business-stakeholders/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/business-stakeholders/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/business-unit-leads/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/business-unit-leads/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/devops-engineers-architects/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/devops-engineers-architects/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/enterprise-architects/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/enterprise-architects/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/makers/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/makers/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/managers/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/managers/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/microsoft-engineering/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/microsoft-engineering/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/microsoft-support/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/microsoft-support/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/powercat/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/powercat/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/security-architects/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/security-architects/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/software-engineers/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/software-engineers/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/solution-architects/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/solution-architects/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/support-engineers/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/support-engineers/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/top-down/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/top-down/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/roles-and-responsibilities/trainers/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/roles-and-responsibilities/trainers/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/discussion/" title="Discussion" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/discussion/">
          Discussion
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/authentication/" title="Authentication in Power Apps Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/authentication/">
        Authentication in Power Apps Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/building-a-sustainability-model/" title="Building a Sustainability Model" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/building-a-sustainability-model/">
        Building a Sustainability Model
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/data-simulation/" title="Data Simulation" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/data-simulation/">
        Data Simulation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/does-every-solution-need-automated-testing/" title="Does Every Solution Need Automated Testing?" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/does-every-solution-need-automated-testing/">
        Does Every Solution Need Automated Testing?
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/enterprise-architecture-discussion/" title="Embracing Testing Strategies for Low-Code Solutions" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/enterprise-architecture-discussion/">
        Embracing Testing Strategies for Low-Code Solutions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/generative-ai/" title="Exploring Generative AI with Power Apps Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/generative-ai/">
        Exploring Generative AI with Power Apps Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/implementing-effective-automated-testing-strategies-in-power-platform-solutions/" title="Implementing Effective Automated Testing Strategies in Power Platform Solutions" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/implementing-effective-automated-testing-strategies-in-power-platform-solutions/">
        Implementing Effective Automated Testing Strategies in Power Platform Solutions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/introduction-to-testing-approaches/" title="Introduction to Testing Approaches" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/introduction-to-testing-approaches/">
        Introduction to Testing Approaches
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/low-code-testing-for-code-first-developer/" title="Low Code Power Platform Testing for the Code First Developer" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/low-code-testing-for-code-first-developer/">
        Low Code Power Platform Testing for the Code First Developer
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/maintainability-of-low-code-solutions/" title="Maintainability of Low Code Solutions Using Automation" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/maintainability-of-low-code-solutions/">
        Maintainability of Low Code Solutions Using Automation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/playwright-vs-test-engine/" title="Playwright vs Power Apps Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/playwright-vs-test-engine/">
        Playwright vs Power Apps Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/test-engine-powerfx/" title="Test Engine and Power Fx" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/test-engine-powerfx/">
        Test Engine and Power Fx
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/discussion/test-authoring/" title="Test Engine Test Authoring" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/discussion/test-authoring/">
        Test Engine Test Authoring
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/examples/" title="Examples" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/examples/">
          Examples
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-build-from-source-run-tests/" title="CoE Kit - Build from Source Example" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-build-from-source-run-tests/">
        CoE Kit - Build from Source Example
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-learning-path-example/" title="CoE Kit Learning Path Example" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-learning-path-example/">
        CoE Kit Learning Path Example
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-setup-and-install-wizard/" title="CoE Kit Setup and Install Wizard" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-setup-and-install-wizard/">
        CoE Kit Setup and Install Wizard
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-infrastructure-as-code/" title="CoE Starter Kit -  Infrastructure As Code" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-infrastructure-as-code/">
        CoE Starter Kit -  Infrastructure As Code
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-powerautomate-testing/" title="CoE Starter Kit Power Automate Testing" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-powerautomate-testing/">
        CoE Starter Kit Power Automate Testing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-test-automation-alm/" title="CoE Starter Kit Test Automation ALM" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-test-automation-alm/">
        CoE Starter Kit Test Automation ALM
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-automate-test-sample/" title="Executing CoE Starter Kit Test Automation" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-automate-test-sample/">
        Executing CoE Starter Kit Test Automation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/extending-testengine-powerfx-with-with-csharp-test-scripts/" title="Extending TestEngine Power FX with C# Test Scripts" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/extending-testengine-powerfx-with-with-csharp-test-scripts/">
        Extending TestEngine Power FX with C# Test Scripts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/coe-kit-extending-test-engine/" title="Extending the Test Engine to Support Testing of the CoE Starter Kit Setup and Upgrade Wizard" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/coe-kit-extending-test-engine/">
        Extending the Test Engine to Support Testing of the CoE Starter Kit Setup and Upgrade Wizard
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/testing-security/" title="Testing Security" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/testing-security/">
        Testing Security
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/custom-page-variables-and-collections/" title="Testing Variables and Collections in Power Apps with the Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/custom-page-variables-and-collections/">
        Testing Variables and Collections in Power Apps with the Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/understanding-no-cliffs-extensibility-model/" title="Understanding the &#34;No Cliffs&#34; Extensibility Model of Power Apps Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/understanding-no-cliffs-extensibility-model/">
        Understanding the &#34;No Cliffs&#34; Extensibility Model of Power Apps Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/examples/using-powerfx-namespaces-in-testing/" title="Using Power Fx Namespaces in Testing" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/examples/using-powerfx-namespaces-in-testing/">
        Using Power Fx Namespaces in Testing
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/learning/" title="Learning" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/learning/">
          Learning
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/learning/architecture/" title="Architecture Learn Module Overview" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/learning/architecture/">
          Architecture Learn Module Overview
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/architecture/01-reliability/" title="01 - Reliability" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/architecture/01-reliability/">
        01 - Reliability
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/" title="Business Learn Module" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/learning/business-path/">
          Business Learn Module
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/01-introduction-to-the-business-value-of-automated-testing/" title="01 - Introduction" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/01-introduction-to-the-business-value-of-automated-testing/">
        01 - Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/02-setting-up-people-and-processes-for-success/" title="02 - Setting Up People and Processes for Success" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/02-setting-up-people-and-processes-for-success/">
        02 - Setting Up People and Processes for Success
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/03-driving-innovation-with-low-code-automated-testing/" title="03 - Driving Innovation with Low-Code Automated Testing" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/03-driving-innovation-with-low-code-automated-testing/">
        03 - Driving Innovation with Low-Code Automated Testing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/04-optimizing-it-processes/" title="04 - Optimizing IT Processes with Low-Code Automated Testing" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/04-optimizing-it-processes/">
        04 - Optimizing IT Processes with Low-Code Automated Testing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/05-understanding-the-high-level-approvals-process/" title="05 - Understanding the High-Level Approvals Process" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/05-understanding-the-high-level-approvals-process/">
        05 - Understanding the High-Level Approvals Process
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/06-establishing-a-sustainability-model/" title="06 - Building a Sustainability Model" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/06-establishing-a-sustainability-model/">
        06 - Building a Sustainability Model
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/business-path/07-growing-to-enterprise-grade/" title="07 - Growing Solutions to Enterprise Grade" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/business-path/07-growing-to-enterprise-grade/">
        07 - Growing Solutions to Enterprise Grade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/playground/" title="Learning Playground" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/playground/">
        Learning Playground
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/" title="Technical Learn Module" class="dd-item
        
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/learning/technical/">
          Technical Learn Module
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/01-introduction/" title="01 - Introduction" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/01-introduction/">
        01 - Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/02-getting-setup/" title="02 - Getting setup" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/02-getting-setup/">
        02 - Getting setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/03-running-your-first-test/" title="03 - Running Your First Test" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/03-running-your-first-test/">
        03 - Running Your First Test
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/04-looking-at-results/" title="04 - Looking at Results" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/04-looking-at-results/">
        04 - Looking at Results
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/05-recording-your-first-test/" title="05 - Recording Your First Test" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/05-recording-your-first-test/">
        05 - Recording Your First Test
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/06-asserting-results/" title="06 - Asserting Results" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/06-asserting-results/">
        06 - Asserting Results
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/07-updating-control-value-using-setproperty/" title="07 - Updating Control Value using SetProperty" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/07-updating-control-value-using-setproperty/">
        07 - Updating Control Value using SetProperty
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/08-simulating-connector/" title="08 - Simulated Connector" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/08-simulating-connector/">
        08 - Simulated Connector
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/09-simulating-dataverse/" title="09 - Simulating Dataverse" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/09-simulating-dataverse/">
        09 - Simulating Dataverse
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/10-using-simulations/" title="10 - Simulations Example" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/10-using-simulations/">
        10 - Simulations Example
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/learning/technical/11-localization/" title="11 - Localization" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/learning/technical/11-localization/">
        11 - Localization
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/PowerApps-TestEngine/en/context/" title="Test Engine Context" class="dd-item
        parent
        
          
        
        
        ">
      <a href="/PowerApps-TestEngine/en/context/">
          Test Engine Context
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/journey-map-assessment/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/journey-map-assessment/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/journey-map/" title="" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/journey-map/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/common-topics/" title="Common Topics" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/common-topics/">
        Common Topics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/debugging-test-engine-test/" title="Debugging Test Engine Tests" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/debugging-test-engine-test/">
        Debugging Test Engine Tests
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/getting-started-assessment/" title="Get Started Assessment" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/getting-started-assessment/">
        Get Started Assessment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/get-started-now/" title="Get Started Now" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/get-started-now/">
        Get Started Now
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/getting-started/" title="Getting Started" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/getting-started/">
        Getting Started
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/getting-started-architects/" title="Getting Started Architects" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/getting-started-architects/">
        Getting Started Architects
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/getting-started-business/" title="Getting Started Business Roles" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/getting-started-business/">
        Getting Started Business Roles
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/getting-started-technical/" title="Getting Started Technical Users" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/getting-started-technical/">
        Getting Started Technical Users
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/growing-to-enterprise-grade/" title="Growing to Enterprise Grade" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/growing-to-enterprise-grade/">
        Growing to Enterprise Grade
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/impacts-on-people-process-and-tooling/" title="Impacts on People, Process, and Tooling" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/impacts-on-people-process-and-tooling/">
        Impacts on People, Process, and Tooling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/interactive-learning/" title="Interactive Learning" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/interactive-learning/">
        Interactive Learning
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/keeping-up-to-date/" title="Keeping up to date" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/keeping-up-to-date/">
        Keeping up to date
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/deep-dive-testengine-layers/" title="Layers of the Power Apps Test Engine" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/deep-dive-testengine-layers/">
        Layers of the Power Apps Test Engine
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/low-code-test-design-principles/" title="Low-Code Testing Principles for Power Platform" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/low-code-test-design-principles/">
        Low-Code Testing Principles for Power Platform
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/ring-deployment-model/" title="Ring Deployment Model" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/ring-deployment-model/">
        Ring Deployment Model
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/roadmap-alignment/" title="Roadmap Alignment" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/roadmap-alignment/">
        Roadmap Alignment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/security-first-initiative/" title="Secure First Initiative" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/security-first-initiative/">
        Secure First Initiative
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/security-testengine-storage-state-deep-dive/" title="Storage State Deep Dive" class="dd-item active">
        <a href="/PowerApps-TestEngine/en/context/security-testengine-storage-state-deep-dive/">
        Storage State Deep Dive
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/test-engine-extensibility/" title="Test Engine Extensibility" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/test-engine-extensibility/">
        Test Engine Extensibility
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/test-engine-providers/" title="Test Engine Providers" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/test-engine-providers/">
        Test Engine Providers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/security-testengine-authentication-changes/" title="Test Engine Security - Authentication Changes" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/security-testengine-authentication-changes/">
        Test Engine Security - Authentication Changes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/testing-localized-power-app/" title="Testing Localized Power Apps" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/testing-localized-power-app/">
        Testing Localized Power Apps
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/strategic-importance-of-automated-testing-from-a-cxo-perspective/" title="The Strategic Importance of Automated Testing from a CXO Perspective" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/strategic-importance-of-automated-testing-from-a-cxo-perspective/">
        The Strategic Importance of Automated Testing from a CXO Perspective
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/transformative-power-of-ai/" title="Transformative Power of AI" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/transformative-power-of-ai/">
        Transformative Power of AI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/understanding-feature-branches/" title="Understanding Feature Branches" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/understanding-feature-branches/">
        Understanding Feature Branches
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/why-automated-testing/" title="Why Automated Testing?" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/why-automated-testing/">
        Why Automated Testing?
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/why-not-just-manual-testing/" title="Why Not Just Manual Testing" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/why-not-just-manual-testing/">
        Why Not Just Manual Testing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/PowerApps-TestEngine/en/context/why-not-just-use-code-first-testing-tools/" title="Why Not Just Use Code First Testing Tools" class="dd-item ">
        <a href="/PowerApps-TestEngine/en/context/why-not-just-use-code-first-testing-tools/">
        Why Not Just Use Code First Testing Tools
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/PowerApps-TestEngine/en/'>Power Apps Test Engine</a> > <a href='/PowerApps-TestEngine/en/context/'>Test Engine Context</a> > Storage State Deep Dive
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#security-context">Security Context</a>
      <ul>
        <li><a href="#security-principles">Security Principles</a></li>
      </ul>
    </li>
    <li><a href="#end-to-end-process">End to End Process</a>
      <ul>
        <li><a href="#local-windows">Local Windows</a></li>
        <li><a href="#data-protection-dataverse">Data Protection Dataverse</a></li>
      </ul>
    </li>
    <li><a href="#tell-me-more">Tell Me More</a>
      <ul>
        <li><a href="#playwright">Playwright</a></li>
        <li><a href="#initial-login">Initial Login</a></li>
        <li><a href="#storage-state">Storage State</a></li>
        <li><a href="#windows-data-protection-api">Windows Data Protection API</a></li>
        <li><a href="#data-protection-api">Data Protection API</a></li>
        <li><a href="#dataverse-integration">Dataverse Integration</a></li>
        <li><a href="#custom-xml-repository">Custom XML Repository</a></li>
        <li><a href="#decryption-process">Decryption Process</a></li>
      </ul>
    </li>
    <li><a href="#sample">Sample</a>
      <ul>
        <li><a href="#dataversekeystore">DataverseKeyStore</a></li>
        <li><a href="#saving-and-locating-encrypted-data">Saving and Locating Encrypted Data</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Storage State Deep Dive
            </h1>
          

        


<p>One of the key elements of automated discussion using the multiple profiles of automated testing of Power apps is the security model to allow login and the security around these credentials. Understanding this deep dive is critical to comprehend how the login credential process works, how login tokens are encrypted, and how this relates to the Multi-Factor Authentication (MFA) process. Additionally, we will explore the controls that the Entra security team can put in in place and the security model across Test Engine, Playwright, Data Protection API, OAuth Login to Dataverse, Dataverse, and Key Value Store.</p>
<p>This section is intended for discussion and review purposes. Each organization should thoroughly review and determine how this information fits into their specific security and compliance processes. The details provided here are meant to offer a comprehensive understanding of the security model for automated testing of Power apps, including login credentials, token encryption, and Multi-Factor Authentication (MFA). It is crucial for each organization to assess and adapt these insights to align with their unique security requirements and protocols.
{: .notice&ndash;success}</p>
<h2 id="security-context">Security Context</h2>
<p>This discussion fits into wider <a href="/PowerApps-TestEngine/context/security-first-initiative.md">Secure First Initiative</a> landscape which is a comprehensive approach to ensuring that security is embedded in every aspect of our solutions. This initiative is built on three core principles: Secure By Design, Secure By Default, and Secure in Operations. By integrating these principles, we aim to create robust, resilient, and secure applications that can withstand evolving cyber threats.</p>
<h3 id="security-principles">Security Principles</h3>
<p>In today&rsquo;s digital landscape, security is paramount. The Secure First Initiative (SFI) emphasizes a proactive approach to security, ensuring that every layer of our solutions is fortified against potential threats. This involves a culture of continuous improvement, robust governance, and adherence to best practices across all stages of development and operations. Let&rsquo;s look at the key principles.</p>
<h4 id="secure-by-design">Secure By Design</h4>
<p>Security is a fundamental aspect of our design process. We build security-first tests to ensure that our solutions are inherently secure from the outset. Looking specifically at the power platform through the lens of the Power Apps Test Engine, this includes:</p>
<ul>
<li>Building on Security concepts in Microsoft Dataverse</li>
<li>User Profiles: Allow support for multiple profiles to verify how the solution reacts when an application is not shared.</li>
</ul>
<h4 id="secure-by-default">Secure By Default</h4>
<p>The aim of solutions come with security protections enabled and enforced by default. This means:</p>
<ul>
<li>Default Security Settings: Ensuring that security settings are enabled by default, requiring no additional configuration.</li>
<li>Automated Testing: Using the Power Apps Test Engine to create and verify tests as part of the build and release process.</li>
<li>Least Privilege Principle: Allowing default roles and permissions to follow the principle of least privilege, and testing that minimizes access rights for users to the bare minimum necessary.</li>
</ul>
<h4 id="secure-in-operations">Secure in Operations</h4>
<p>Continuous security validation and verification are crucial to maintaining a secure operational environment. This involves:</p>
<ul>
<li>Continuous Integration and Deployment (CI/CD): Ability to create an share test profiles inside CI/CD pipelines to continuously validate and verify security configurations.</li>
<li>Multi-Factor Authentication (MFA) and Conditional Access: Ensuring that solutions work seamlessly with MFA and Conditional Access policies.</li>
</ul>
<h2 id="end-to-end-process">End to End Process</h2>
<p>With that context in place lets explore the possible end to end process at a high level.</p>
<p>{% include feature_row type=center %}</p>
<h3 id="local-windows">Local Windows</h3>
<p>The first and simplest option to secure storage state is using Windows Data Protection API. While this option has less components it does have limitations as it requires Microsoft Windows together the user account and machine to secure the files locally. If you are looking to execute on a different operating system or execute your tests in the context of pipelines the <a href="#data-protection-dataverse">Dataverse Data Protection</a> approach will be a better approach.</p>
<p>{% include figure popup=true image_path=&quot;/context/media/test-engine-security-storage-state-local.png&quot; alt=&ldquo;Diagram of end to end process of Browser storage state using local storage and Windows Data Protection API&rdquo; %}</p>
<ol>
<li>The current storage state user authentication provider is extended to Save and load the Playwright browser context as Encrypted values</li>
<li>Make use of the <a href="https://learn.microsoft.com/dotnet/standard/security/how-to-use-data-protection">Windows Data Projection API</a> to protect and unprotect the saved state at rest.</li>
<li>Save encrypted json file or retrieve un protected JSON to the file system for use in other test sessions</li>
</ol>
<h3 id="data-protection-dataverse">Data Protection Dataverse</h3>
<p>The next approach makes use of a more comprehensive data protection approach that allows saved user persona state to be shared across multiple machines. This approach adopts a multi level approach to allow for a wider set of operating systems and execution environments.</p>
<p>{% include figure popup=true image_path=&quot;/context/media/test-engine-security-storage-state.png&quot; alt=&ldquo;Diagram of end to end process of Browser storage state using Microsoft Data Protection and Dataverse Data store for secure values&rdquo; %}</p>
<ol>
<li>The current storage state user authentication provider is extended to Save and load the Playwright browser context as Encrypted values</li>
<li>Make use of the Microsoft.AspNetCore.DataProtection package to offer Windows Data Protection (DAPI) or Certificate public / private encryption</li>
<li>Use the current logged in Azure CLI session to obtain an access token to the Dataverse instance where Test Engine Key values and encrypted key data is stored</li>
<li>Use a custom xml repository that provides the ability query and create Data Protection state by implementing IXmlRepository</li>
<li>Store XML state of data protection in Dataverse Table. Encryption of XML State managed by Data Protection API and selected protection providers</li>
<li>Make use of Dataverse Security model, sharing and auditing features are enabled to control access and record access to key and key data. Data Protection API is used to decrypt values and apply the state json to other test sessions.</li>
<li>Use the Data Protection API to decrypt the encrypted value using Windows Data Protection API (DAPI) or X.509 certificate private key.</li>
<li>A future option could also consider adding integration with <a href="https://learn.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-9.0">Azure Key Vault</a></li>
</ol>
<h2 id="tell-me-more">Tell Me More</h2>
<p>Lets explore each of these layers in more detail.</p>
<h3 id="playwright">Playwright</h3>
<p>Test Engine web based tests encapsulate browser automation using <a href="https://playwright.dev/dotnet/">Playwright</a>. The key class in this process is <a href="https://playwright.dev/dotnet/docs/api/class-browsercontext#browser-context-storage-state">BrowserContext</a> that allows provide a way to operate multiple independent browser sessions. Specifically the key element is the use of storage state for this browser context, contains current cookies and local storage snapshot to allow interactive and headless login.</p>
<h3 id="initial-login">Initial Login</h3>
<p>Using the storage state provider of Test Engine the initial login must be part of an interactive login process. This process will attempt to start a test session. When no previous storage state is available or valid the interactive user will be prompted to be logged in via Entra before allowing access to the requested page. This login process will use what ever Multi Factor and Conditional Access policies that have been applied to validate the user login.</p>
<p>Including some further on possible settings for background reading:</p>
<ol>
<li>Configured <a href="https://learn.microsoft.com/entra/identity/authentication/concept-authentication-methods">Authentication Methods</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/authentication/concept-mfa-howitworks">How it works: Microsoft Entra multifactor authentication</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/authentication/concepts-azure-multi-factor-authentication-prompts-session-lifetime">Reauthentication prompts and session lifetime for Microsoft Entra multifactor authentication</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/authentication/concept-authentication-web-browser-cookies">Web browser cookies used in Microsoft Entra authentication</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/conditional-access/overview">What is Conditional Access?</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/conditional-access/howto-conditional-access-session-lifetime">Configure adaptive session lifetime policies</a></li>
<li><a href="https://learn.microsoft.com/entra/identity/conditional-access/policy-alt-all-users-compliant-hybrid-or-mfa">Require a compliant device, Microsoft Entra hybrid joined device, or multifactor authentication for all users</a></li>
<li><a href="https://learn.microsoft.com/defender-cloud-apps/what-is-defender-for-cloud-apps">Microsoft Defender for Cloud Apps overview</a></li>
</ol>
<p>The goal of the login process it work with organization defined login process so that defined authentication methods are validated.</p>
<h3 id="storage-state">Storage State</h3>
<p>After a successful login process The storage state of the browser context can contain <a href="https://learn.microsoft.com/entra/identity/authentication/concept-authentication-web-browser-cookies">cookies</a> that are used to authenticate later sessions.</p>
<p>The <a href="https://learn.microsoft.com/dotnet/standard/security/how-to-use-data-protection">How to: Use Data Protection</a> provides more information and details on this approach.</p>
<h3 id="windows-data-protection-api">Windows Data Protection API</h3>
<p>.NET provides access to the data protection API (DPAPI), which allows you to encrypt data using information from the current user account or computer. When you use the DPAPI, you alleviate the difficult problem of explicitly generating and storing a cryptographic key.</p>
<h3 id="data-protection-api">Data Protection API</h3>
<p>The <a href="https://learn.microsoft.com/aspnet/core/security/data-protection/introduction?view=aspnetcore-9.0">Microsoft.AspNetCore.DataProtection</a> package offers Windows Data Protection (DAPI) or Certificate public/private encryption. This ensures that sensitive data, such as login tokens, is securely encrypted and stored.</p>
<p>Key information to review for readers that are unfamiliar with Data Protection API:</p>
<ul>
<li><a href="https://learn.microsoft.com/aspnet/core/security/data-protection/implementation/authenticated-encryption-details?view=aspnetcore-9.0">Authenticated encryption details in ASP.NET Core</a> with ES-256-CBC + HMACSHA256</li>
<li><a href="https://learn.microsoft.com/aspnet/core/security/data-protection/implementation/key-management?view=aspnetcore-9.0">Key management in ASP.NET Core</a></li>
<li><a href="https://learn.microsoft.com/aspnet/core/security/data-protection/implementation/key-storage-providers?view=aspnetcore-9.0&amp;tabs=visual-studio#custom-key-repository">Custom key repository</a></li>
<li><a href="https://learn.microsoft.com/aspnet/core/security/data-protection/implementation/key-encryption-at-rest?view=aspnetcore-9.0#windows-dpapi">Windows DPAPI key encryption at rest</a> encryption mechanism for data that&rsquo;s never read outside of the current machine. Only applies to Windows deployments.</li>
<li><a href="https://learn.microsoft.com/aspnet/core/security/data-protection/implementation/key-encryption-at-rest?view=aspnetcore-9.0#x509-certificate">X.509 certificate key encryption at rest</a></li>
</ul>
<h4 id="encryption">Encryption</h4>
<p>By default data values are encrypted with ES-256-CBC and HMACSHA256.</p>
<p>ES-256-CBC stands for &ldquo;AES-256 in Cipher Block Chaining (CBC) mode.&rdquo; AES (Advanced Encryption Standard) is a widely used encryption algorithm that ensures data confidentiality. The &ldquo;256&rdquo; refers to the key size, which is 256 bits. CBC mode is a method of encrypting data in blocks, where each block of plaintext is XORed with the previous ciphertext block before being encrypted. This ensures that identical plaintext blocks will produce different ciphertext blocks, enhancing security.</p>
<p>HMACSHA256 stands for &ldquo;Hash-based Message Authentication Code using SHA-256.&rdquo; HMAC is a mechanism that provides data integrity and authenticity by combining a cryptographic hash function (in this case, SHA-256) with a secret key. SHA-256 is a member of the SHA-2 family of cryptographic hash functions, producing a 256-bit hash value.</p>
<p>When combined, ES-256-CBC + HMACSHA256 provides both encryption and authentication:</p>
<ul>
<li>Encryption with AES-256-CBC: The data is encrypted using AES-256 in CBC mode, ensuring that the data is confidential and cannot be read by unauthorized parties.</li>
<li>Authentication with HMACSHA256: An HMAC is generated using SHA-256 and a secret key. This HMAC is appended to the encrypted data. When the data is received, the HMAC can be recalculated and compared to the appended HMAC to verify that the data has not been tampered with.</li>
</ul>
<p>This combination ensures that the data is both encrypted (confidential) and authenticated (integrity and authenticity), providing a robust security mechanism.</p>
<h3 id="dataverse-integration">Dataverse Integration</h3>
<p>The current logged-in Azure CLI session is used to obtain an access token to the Dataverse instance where Test Engine key values and encrypted key data are stored. The Dataverse security model, sharing, and auditing features are enabled to control access and record access to key and key data.</p>
<p>Further reading for readers unfamiliar with Azure CLI Login, Access Token and Dataverse security model:</p>
<ol>
<li><a href="https://learn.microsoft.com/cli/azure/reference-index?view=azure-cli-latest#az-login">az login</a></li>
<li><a href="https://learn.microsoft.com/cli/azure/account?view=azure-cli-latest#az-account-get-access-token">az account get-access-token</a> using Azure CLI to obtain access token. In this case it is used to obtain access token to integrate with Dataverse custom XML repository</li>
<li><a href="https://www.nuget.org/packages/Microsoft.PowerPlatform.Dataverse.Client/">Microsoft.PowerPlatform.Dataverse.Client</a> used to access Custom XML Repository using the obtained access token</li>
<li><a href="https://learn.microsoft.com/power-platform/admin/wp-security-cds">Security concepts in Microsoft Dataverse</a> where using User or Team owned records.</li>
<li><a href="https://learn.microsoft.com/power-apps/teams/dataverse-for-teams-table-permissions">Granting permission to tables in Dataverse for Microsoft Teams</a></li>
<li><a href="https://learn.microsoft.com/power-platform/admin/wp-security-cds#record-sharing">Record sharing</a> Individual records can be shared on a one-by-one basis with another user (interactive or application user).</li>
<li><a href="https://learn.microsoft.com/power-platform/admin/wp-security-cds#column-level-security-in-dataverse">Column-level security in Dataverse</a></li>
<li><a href="https://learn.microsoft.com/power-platform/admin/system-application-users">System and application users</a>. Specifically <a href="https://learn.microsoft.com/power-platform/admin/create-users#create-an-application-user">application users</a> that could be used from the context of a CI/CD process.</li>
</ol>
<h3 id="custom-xml-repository">Custom XML Repository</h3>
<p>A custom XML repository provides the ability to query and create Data Protection state by implementing <a href="https://learn.microsoft.com/aspnet/core/security/data-protection/extensibility/key-management?view=aspnetcore-8.0#ixmlrepository">IXmlRepository</a>. The XML state of data protection is stored in a Dataverse table, with encryption managed by the Data Protection API and selected protection providers.</p>
<p>Note the IXmlRepository don&rsquo;t need to parse the XML passing through them. They treat the XML documents as opaque and let higher layers of the Data Protection API worry about generating and parsing the documents.</p>
<h3 id="decryption-process">Decryption Process</h3>
<p>The Data Protection API is used to decrypt the encrypted value using Windows Data Protection API (DAPI) or X509 certificate private key. This decrypted value is then applied to other test sessions.</p>
<h2 id="sample">Sample</h2>
<p>The following sample is a conceptual overview of how values are Protected and Unprotected using Dataverse as the IXmlRepository</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.AspNetCore.DataProtection;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.AspNetCore.DataProtection.Repositories;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.Extensions.DependencyInjection;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.Extensions.Logging;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.PowerPlatform.Dataverse.Client;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.Xrm.Sdk;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Microsoft.Xrm.Sdk.Query;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Security.Cryptography.X509Certificates;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> System.Xml.Linq;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Program</span> { 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Main(<span style="color:#66d9ef">string</span>[] args)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ServiceProvider services = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> serviceCollection = <span style="color:#66d9ef">new</span> ServiceCollection();
</span></span><span style="display:flex;"><span>        serviceCollection.AddLogging(configure =&gt; configure.AddConsole());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> api = <span style="color:#66d9ef">new</span> Uri(<span style="color:#e6db74">&#34;https://contoso.crm.dynamics.com/&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">string</span> keyName = <span style="color:#e6db74">&#34;Sample&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Configure Dataverse connection</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> serviceClient = <span style="color:#66d9ef">new</span> ServiceClient(api, (url) =&gt; Task.FromResult(AzureCliHelper.GetAccessToken(api)));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        serviceCollection.AddSingleton&lt;IOrganizationService&gt;(serviceClient);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        serviceCollection.AddDataProtection()
</span></span><span style="display:flex;"><span>            .ProtectKeysWithCertificate(GetCertificateFromStore(<span style="color:#e6db74">&#34;localhost&#34;</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//.ProtectKeysWithDpapi()</span>
</span></span><span style="display:flex;"><span>            .AddKeyManagementOptions(options =&gt;
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                options.XmlRepository = <span style="color:#66d9ef">new</span> DataverseKeyStore(services?.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;(), serviceClient, keyName);
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        services = serviceCollection.BuildServiceProvider();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> protector = services.GetDataProtector(<span style="color:#e6db74">&#34;ASP Data Protection&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">string</span> valueName = <span style="color:#66d9ef">string</span>.Empty;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> ( <span style="color:#66d9ef">string</span>.IsNullOrEmpty(valueName))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            Console.WriteLine(<span style="color:#e6db74">&#34;Variable Name&#34;</span>);
</span></span><span style="display:flex;"><span>            valueName = Console.ReadLine();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> matches = FindMatch(serviceClient, keyName, valueName);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (matches.Count() == <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">string</span> newValue = <span style="color:#66d9ef">string</span>.Empty;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> ( <span style="color:#66d9ef">string</span>.IsNullOrEmpty(newValue))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                Console.WriteLine(<span style="color:#e6db74">&#34;Value does not exist. What would you like the value to be?&#34;</span>);
</span></span><span style="display:flex;"><span>                newValue = Console.ReadLine();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            StoreValue(serviceClient, keyName, valueName, protector.Protect(newValue));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            Console.WriteLine(<span style="color:#e6db74">$&#34;Saved value for {valueName}&#34;</span>);
</span></span><span style="display:flex;"><span>        } 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">string</span> data = protector.Unprotect(matches.First().Data);
</span></span><span style="display:flex;"><span>            Console.WriteLine(<span style="color:#e6db74">$&#34;Value {valueName}: {data}&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Console.ReadLine();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="dataversekeystore">DataverseKeyStore</h3>
<p>Possible code to query and store encryption key values encrypted via DAPI or public key of certificate. This layer just passes the opaque xml to other components interact with.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DataverseKeyStore</span> : IXmlRepository
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ILogger&lt;Program&gt;? _logger;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> IOrganizationService _service;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span> _friendlyName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> DataverseKeyStore(ILogger&lt;Program&gt;? logger, IOrganizationService organizationService, <span style="color:#66d9ef">string</span> friendlyName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _logger = logger;
</span></span><span style="display:flex;"><span>        _service = organizationService;
</span></span><span style="display:flex;"><span>        _friendlyName = friendlyName;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> IReadOnlyCollection&lt;XElement&gt; GetAllElements()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Retrieve keys from Dataverse</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> query = <span style="color:#66d9ef">new</span> QueryExpression(<span style="color:#e6db74">&#34;te_key&#34;</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            ColumnSet = <span style="color:#66d9ef">new</span> ColumnSet(<span style="color:#e6db74">&#34;te_xml&#34;</span>),
</span></span><span style="display:flex;"><span>            Criteria = <span style="color:#66d9ef">new</span> FilterExpression
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                Conditions =
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">new</span> ConditionExpression(<span style="color:#e6db74">&#34;te_name&#34;</span>, ConditionOperator.Equal, _friendlyName)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> keys = _service.RetrieveMultiple(query)
</span></span><span style="display:flex;"><span>        .Entities
</span></span><span style="display:flex;"><span>        .Select(e =&gt; XElement.Parse(e.GetAttributeValue&lt;<span style="color:#66d9ef">string</span>&gt;(<span style="color:#e6db74">&#34;te_xml&#34;</span>)))
</span></span><span style="display:flex;"><span>        .ToList();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> keys.AsReadOnly();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> StoreElement(XElement element, <span style="color:#66d9ef">string</span> friendlyName)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> keyEntity = <span style="color:#66d9ef">new</span> Entity(<span style="color:#e6db74">&#34;te_key&#34;</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">            [&#34;te_name&#34;]</span> = _friendlyName,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">            [&#34;te_xml&#34;]</span> = element.ToString(SaveOptions.DisableFormatting)
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _service.Create(keyEntity);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="saving-and-locating-encrypted-data">Saving and Locating Encrypted Data</h3>
<p>The following gives a simple view of possible code to store and retreive encrypted values from dataverse</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IReadOnlyCollection&lt;ProtectedKeyValue&gt; FindMatch(IOrganizationService service, <span style="color:#66d9ef">string</span> keyName, <span style="color:#66d9ef">string?</span> valueName)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Retrieve keys from Dataverse</span>
</span></span><span style="display:flex;"><span>    FilterExpression filter = <span style="color:#66d9ef">new</span> FilterExpression(LogicalOperator.And);
</span></span><span style="display:flex;"><span>    filter.Conditions.Add(<span style="color:#66d9ef">new</span> ConditionExpression(<span style="color:#e6db74">&#34;te_keyname&#34;</span>, ConditionOperator.Equal, keyName));
</span></span><span style="display:flex;"><span>    filter.Conditions.Add(<span style="color:#66d9ef">new</span> ConditionExpression(<span style="color:#e6db74">&#34;te_valuename&#34;</span>, ConditionOperator.Equal, valueName));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> query = <span style="color:#66d9ef">new</span> QueryExpression(<span style="color:#e6db74">&#34;te_keydata&#34;</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ColumnSet = <span style="color:#66d9ef">new</span> ColumnSet(<span style="color:#e6db74">&#34;te_keyname&#34;</span>, <span style="color:#e6db74">&#34;te_valuename&#34;</span>, <span style="color:#e6db74">&#34;te_data&#34;</span>),
</span></span><span style="display:flex;"><span>        Criteria = filter
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> keys = service.RetrieveMultiple(query)
</span></span><span style="display:flex;"><span>    .Entities
</span></span><span style="display:flex;"><span>    .Select(e =&gt; <span style="color:#66d9ef">new</span> ProtectedKeyValue {
</span></span><span style="display:flex;"><span>        KeyId = e.Id.ToString(),
</span></span><span style="display:flex;"><span>        KeyName = e[<span style="color:#e6db74">&#34;te_keyname&#34;</span>]?.ToString(),
</span></span><span style="display:flex;"><span>        ValueName = e[<span style="color:#e6db74">&#34;te_valuename&#34;</span>]?.ToString(),
</span></span><span style="display:flex;"><span>        Data = e[<span style="color:#e6db74">&#34;te_data&#34;</span>]?.ToString(),
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    .ToList();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> keys.AsReadOnly();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> StoreValue(IOrganizationService service, <span style="color:#66d9ef">string</span> keyName, <span style="color:#66d9ef">string</span> valueName, <span style="color:#66d9ef">string</span> data)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> keyEntity = <span style="color:#66d9ef">new</span> Entity(<span style="color:#e6db74">&#34;te_keydata&#34;</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">        [&#34;te_keyname&#34;]</span> = keyName,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">        [&#34;te_valuename&#34;]</span> =  valueName,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">        [&#34;te_data&#34;]</span> = data,
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    service.Create(keyEntity);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/PowerApps-TestEngine/en/context/security-first-initiative/" title="Secure First Initiative"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/PowerApps-TestEngine/en/context/test-engine-extensibility/" title="Test Engine Extensibility" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/PowerApps-TestEngine/js/clipboard.min.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/perfect-scrollbar.min.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/perfect-scrollbar.jquery.min.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/jquery.sticky.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/featherlight.min.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/highlight.pack.js?1737352077"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/PowerApps-TestEngine/js/modernizr.custom-3.6.0.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/learn.js?1737352077"></script>
    <script src="/PowerApps-TestEngine/js/hugo-learn.js?1737352077"></script>
    
        
            <script src="/PowerApps-TestEngine/mermaid/mermaid.js?1737352077"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

