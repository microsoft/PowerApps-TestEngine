# yaml-embedded-languages: powerfx
testSuite:
  testSuiteName: Weather Sample
  testSuiteDescription: Run Weather sample
  persona: User1
  appLogicalName: NotNeeded
  onTestCaseStart: |
    = Experimental.SimulateDataverse({
        Action: "Query",
        Entity: "te_weathercategories",
        Then: Table(
          {
              'te_categoryname': "Test Category",
              'createdon': "2024-12-02T17:52:45Z",
              'te_weathercategoryid': "f58de6c-905d-457d-846b-3e0b2aa4c5fd"
          }
        )
      });
      Experimental.SimulateDataverse({
        Action: "Query",
        Entity: "te_weathersnapshots",
        Then: Table(
            { 
              'te_city': "Test, WA",
              'te_date': "2024-12-03T10:41:24Z",
              'te_description': "Match: Test, WA, Temp: 6°C, Feels: 9°C, Partly sunny",
              'te_weathersnapshotid': "a611b4e0-ffb0-ef11-b8e8-6045bd006fad",
              '_te_weathercategory_value': "ff58de6c-905d-457d-846b-3e0b2aa4c5fd",
              '_te_weathercategory_value@Microsoft.Dynamics.CRM.associatednavigationproperty': "te_WeatherCategory",
              '_te_weathercategory_value@Microsoft.Dynamics.CRM.lookuplogicalname': "te_weathercategory", 
              '_te_weathercategory_value@OData.Community.Display.V1.FormattedValue': "Test Category",
              'te_date@OData.Community.Display.V1.FormattedValue': "12/3/2024"
            })
        });
  testCases:
    - testCaseName: Step 1 - Confirm Pre-requisites
      testCaseDescription: Verify pre-requistes in place
      testSteps: |
        = Experimental.Pause();
      

     
testSettings:
  headless: false
  locale: "en-US"
  recordVideo: true
  extensionModules:
    enable: true
  browserConfigurations:
    - browser: Chromium
  timeout: 480000

environmentVariables:
  users:
    - personaName: User1
      emailKey: user1Email
      passwordKey: NotNeeded
