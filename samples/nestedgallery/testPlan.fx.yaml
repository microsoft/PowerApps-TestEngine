test:
  name: Nested Gallery
  description: Verifies that you can interact with controls within a nested gallery
  persona: User1
  appLogicalName: new_nestedgallery_a43df

  testSteps: |
    = Screenshot("nestedgallery_loaded.png");
      Assert(Text(TextInput1.Text) = "5", "Validate default number of columns to generate is 5");
      // Generate 1 row
      Select(Button1);
      // Validate that the row was generated with some data
      Assert(Text(Index(Table(Gallery1), 1).Value.Label4.Text) = "Row id: 1", "Validate row label");
      Assert(Text(Index(Table(Index(Table(Gallery1), 1).Value.Gallery2), 2).Value.Label5.Text) = "Column id: 2", "Validate the label in the nested gallery");
      // Generate a 2nd row
      Select(Button1);
      Assert(Text(Index(Table(Gallery1), 2).Value.Label4.Text) = "Row id: 2", "Validate row label");
      Assert(Text(Index(Table(Index(Table(Gallery1), 2).Value.Gallery2), 4).Value.Label5.Text) = "Column id: 4", "Validate the label in the nested gallery");
      // Ensure that selected data is null
      Assert(IsBlank(Text(Label3.Text)), "Validate that the selected row is empty");
      Assert(IsBlank(Text(Label8.Text)), "Validate that the selected column is empty");
      // Click 2nd row in the gallery
      Select(Index(Table(Gallery1), 2).Value.Icon2);
      Assert(Text(Label3.Text) = "2", "Validate that the selected row is updated");
      Assert(Text(Label8.Text) = "0", "Validate that the selected column is reset");
      // Click 4th column in 1st row in the gallery
      Select(Index(Table(Index(Table(Gallery1), 1).Value.Gallery2), 4).Value.Icon3);
      Assert(Text(Label3.Text) = "1", "Validate that the selected row is updated");
      Assert(Text(Label8.Text) = "4", "Validate that the selected column is updated");
      Screenshot("nestedgallery_end.png");

testSettings:
  recordVideo: true
  browserConfigurations:
    - browser: Chromium

environmentVariables:
  users:
    - personaName: User1
      emailKey: user1Email
      passwordKey: user1Password
